{% extends 'base.html' %}

{% block content %}
<a href="{{ url_for('homepage') }}">Home</a>
<h1>Post #{{ nr }}(ğŸ‘ğŸ‘{{doubleplusgood}}/ğŸ‘ğŸ‘{{plusgood}}/ğŸ‘{{good}}/{{ungood}}ğŸ‘/{{doubleplusungood}}ğŸ‘ğŸ‘)</h1>
<p style="text-decoration: underline;">
    {{ content }}
</p>
<button onclick="vote({{nr}}, 'doubleplusgood')">ğŸ‘ğŸ‘ğŸ‘</button>
<button onclick="vote({{nr}}, 'plusgood')">ğŸ‘ğŸ‘</button>
<button onclick="vote({{nr}}, 'good')">ğŸ‘</button>
<button onclick="vote({{nr}}, 'ungood')">ğŸ‘</button>
<button onclick="vote({{nr}}, 'doubleplusungood')">ğŸ‘ğŸ‘</button>


<script>
function vote(post_id, rating) {
    fetch('/vote?' + new URLSearchParams({post_id:post_id, rating:rating})).then(function (resp) {
        if (resp.status == 200) {
            alert('votes successfully');
        } else {
            resp.text().then((message) => {
                /* Print the message we got back from the server */
                alert("failed to vote\n" + message)
            })
        }
    });
}
</script>

{% endblock content %}
